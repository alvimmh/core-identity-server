/**
 * Minified by jsDelivr using Terser v5.9.0.
 * Original file: /npm/qrcode@1.5.0/lib/core/qrcode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const Utils=require("./utils"),ECLevel=require("./error-correction-level"),BitBuffer=require("./bit-buffer"),BitMatrix=require("./bit-matrix"),AlignmentPattern=require("./alignment-pattern"),FinderPattern=require("./finder-pattern"),MaskPattern=require("./mask-pattern"),ECCode=require("./error-correction-code"),ReedSolomonEncoder=require("./reed-solomon-encoder"),Version=require("./version"),FormatInfo=require("./format-info"),Mode=require("./mode"),Segments=require("./segments");function setupFinderPattern(e,t){const r=e.size,o=FinderPattern.getPositions(t);for(let t=0;t<o.length;t++){const n=o[t][0],s=o[t][1];for(let t=-1;t<=7;t++)if(!(n+t<=-1||r<=n+t))for(let o=-1;o<=7;o++)s+o<=-1||r<=s+o||(t>=0&&t<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===t||6===t)||t>=2&&t<=4&&o>=2&&o<=4?e.set(n+t,s+o,!0,!0):e.set(n+t,s+o,!1,!0))}}function setupTimingPattern(e){const t=e.size;for(let r=8;r<t-8;r++){const t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}function setupAlignmentPattern(e,t){const r=AlignmentPattern.getPositions(t);for(let t=0;t<r.length;t++){const o=r[t][0],n=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(o+t,n+r,!0,!0):e.set(o+t,n+r,!1,!0)}}function setupVersionInfo(e,t){const r=e.size,o=Version.getEncodedBits(t);let n,s,i;for(let t=0;t<18;t++)n=Math.floor(t/3),s=t%3+r-8-3,i=1==(o>>t&1),e.set(n,s,i,!0),e.set(s,n,i,!0)}function setupFormatInfo(e,t,r){const o=e.size,n=FormatInfo.getEncodedBits(t,r);let s,i;for(s=0;s<15;s++)i=1==(n>>s&1),s<6?e.set(s,8,i,!0):s<8?e.set(s+1,8,i,!0):e.set(o-15+s,8,i,!0),s<8?e.set(8,o-s-1,i,!0):s<9?e.set(8,15-s-1+1,i,!0):e.set(8,15-s-1,i,!0);e.set(o-8,8,1,!0)}function setupData(e,t){const r=e.size;let o=-1,n=r-1,s=7,i=0;for(let a=r-1;a>0;a-=2)for(6===a&&a--;;){for(let r=0;r<2;r++)if(!e.isReserved(n,a-r)){let o=!1;i<t.length&&(o=1==(t[i]>>>s&1)),e.set(n,a-r,o),s--,-1===s&&(i++,s=7)}if(n+=o,n<0||r<=n){n-=o,o=-o;break}}}function createData(e,t,r){const o=new BitBuffer;r.forEach((function(t){o.put(t.mode.bit,4),o.put(t.getLength(),Mode.getCharCountIndicator(t.mode,e)),t.write(o)}));const n=8*(Utils.getSymbolTotalCodewords(e)-ECCode.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=n&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);const s=(n-o.getLengthInBits())/8;for(let e=0;e<s;e++)o.put(e%2?17:236,8);return createCodewords(o,e,t)}function createCodewords(e,t,r){const o=Utils.getSymbolTotalCodewords(t),n=o-ECCode.getTotalCodewordsCount(t,r),s=ECCode.getBlocksCount(t,r),i=s-o%s,a=Math.floor(o/s),f=Math.floor(n/s),l=f+1,u=a-f,c=new ReedSolomonEncoder(u);let d=0;const m=new Array(s),g=new Array(s);let p=0;const C=new Uint8Array(e.buffer);for(let e=0;e<s;e++){const t=e<i?f:l;m[e]=C.slice(d,d+t),g[e]=c.encode(m[e]),d+=t,p=Math.max(p,t)}const w=new Uint8Array(o);let h,S,P=0;for(h=0;h<p;h++)for(S=0;S<s;S++)h<m[S].length&&(w[P++]=m[S][h]);for(h=0;h<u;h++)for(S=0;S<s;S++)w[P++]=g[S][h];return w}function createSymbol(e,t,r,o){let n;if(Array.isArray(e))n=Segments.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let o=t;if(!o){const t=Segments.rawSplit(e);o=Version.getBestVersionForData(t,r)}n=Segments.fromString(e,o||40)}}const s=Version.getBestVersionForData(n,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<s)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else t=s;const i=createData(t,r,n),a=Utils.getSymbolSize(t),f=new BitMatrix(a);return setupFinderPattern(f,t),setupTimingPattern(f),setupAlignmentPattern(f,t),setupFormatInfo(f,r,0),t>=7&&setupVersionInfo(f,t),setupData(f,i),isNaN(o)&&(o=MaskPattern.getBestMask(f,setupFormatInfo.bind(null,f,r))),MaskPattern.applyMask(o,f),setupFormatInfo(f,r,o),{modules:f,version:t,errorCorrectionLevel:r,maskPattern:o,segments:n}}exports.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let r,o,n=ECLevel.M;return void 0!==t&&(n=ECLevel.from(t.errorCorrectionLevel,ECLevel.M),r=Version.from(t.version),o=MaskPattern.from(t.maskPattern),t.toSJISFunc&&Utils.setToSJISFunction(t.toSJISFunc)),createSymbol(e,r,n,o)};
//# sourceMappingURL=/sm/391587f076982e134822d2ff1fddb01e9479ed406dd0a53d9f9c16c80a38ac29.map